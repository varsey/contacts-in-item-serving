version: '2.3'
services:
    dev:
        deploy:
            resources:
                reservations:
                    devices:
                        - driver: nvidia
                          count: 1
                          capabilities: [ gpu ]
        # runtime: nvidia
        build:
          context: ./
          dockerfile: ./Dockerfile
        image: contacts-in-item:local
        container_name: contacts-in-item-local
        volumes:
            - ./:/app
            - ./data:/data
            - ./data:/test_data
        ipc: host
        shm_size: 4G
        command: "python3 lib/run.py --debug"
        network_mode: none
